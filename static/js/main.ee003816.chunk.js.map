{"version":3,"sources":["utils/index.js","components/Block.js","components/BlockWrapper.js","components/Canvas.js","components/RenderResult.js","components/ButtonGroup.js","components/Note.js","components/Form.js","components/Settings.js","components/Playground.js","App.js","reportWebVitals.js","index.js"],"names":["redrawBackground","canvas","image","width","height","ctx","getContext","clearRect","drawImage","stepX","stepY","color","lineWidth","i","j","beginPath","moveTo","lineTo","strokeStyle","stroke","drawGrid","serializeWidthAndHeightOnStyle","style","blockCreator","id","type","left","top","radius","isActive","children","extra","generateId","size","blockGroupBoundaryMin","blocks","side","filterAll","_value","forEach","block","push","minValue","Math","min","blockGroupBoundaryMax","max","maxValue","calculateBlockGroupHeight","margin","_blocksheights","Base","props","_className","_handleDragStart","bind","event","target","getBoundingClientRect","x","y","dataTransfer","setData","JSON","stringify","X","clientX","Y","clientY","this","constructor","_type","_preset","getBlockByType","className","onDragStart","parseInt","backgroundColor","Component","Circle","Square","Group","map","index","Comp","position","_renderItems","items","PostBlock","PostBlock2","UserTagBlock","UserTagBlock2","PostFormBlock","PostFormBlock2","UserInfoBlock","UserInfoBlock2","CourseListBlock","CourseListBlock2","CopyrightBlock","blockMap","Map","has","get","presets","find","preset","BlockLists","draggable","BlockWrapper","setCurrentBlock","removeBlock","addBlock","Block","_handleKeyDown","getAttribute","document","body","remove","add","update","Backspace","preventDefault","stopPropagation","selectedIds","KeyC","metaKey","console","log","KeyV","newBlocks","newBlock","ArrowUp","ArrowRight","ArrowDown","ArrowLeft","blockShortCutKeyMap","code","useEffect","window","addEventListener","removeEventListener","getElementById","focus","opacity","tabIndex","isactive","toString","undefined","onClick","BlockActiveLine","onLineMove","activeStyle","useState","isLineActive","setIsLineActive","onMouseDown","lineRect","newPosition","right","bottom","_move","e","_up","onMouseOver","onMouseOut","RenderBlocks","onUpdateBlock","lines","_handleUpdateBlock","blockItems","isResetActive","activeBlockIds","item","_handleRemoveBlock","filter","indexOf","_handleAddBlock","activeIds","_handleLineMove","currentBlock","minus","line","Canvas","onDrop","onDragOver","canvasRef","useRef","current","CanvasChildren","Children","child","cloneElement","zIndex","onDragLeave","canvasRect","pointStart","movePoint","start","end","closePath","canvasDrawActiveLine","boundary","blocksInCanvasActiveArea","ref","_parseStyleToCode","images","sizes","positions","codes","length","join","RenderResult","styles","backgroundImages","backgroundPositions","backgroundSizes","imageMap","sizeMap","_generateStyles","_selectText","select","execCommand","htmlFor","name","value","formatCode","rows","cols","onFocus","readOnly","backgroundImage","backgroundPosition","backgroundSize","formatCodeCSS","ButtonGroup","onCanvasChange","onBlockChange","setBlocks","canvasAttr","innerHeight","prompt","replace","codeBlocks","blockIds","result","blockRegx","RegExp","colorReg","digitReg","codeGroup","match","_getType","_getSize","trim","split","data","unshift","parseCodeToStyle","extraHeight","Note","maxHeight","overflow","display","Form","onSubmit","onReset","formdata","FormData","Object","fromEntries","entries","checkboxs","querySelectorAll","checkboxSet","Set","Array","prototype","call","checkbox","getAll","RenderInput","typeInputMap","defaultValue","placeholder","Inputs","arguments","SetCanvasAccordingToWidthHeight","onUpdateCanvas","_readImage","file","imageWidth","Promise","resolve","reject","reader","FileReader","onload","Image","originalWidth","src","readAsDataURL","_handleSubmit","a","accept","Settings","activeBlock","inactiveBlock","blockGroup","activeGroup","_blockChangeThrottle","delay","_timers","fn","argus","clearTimeout","shift","setTimeout","throttle","Playground","liveRender","_setBlocksAndListen","_handleUpdateBlockById","_getCurrentBlock","Number","border","padding","parse","getData","blockItemIds","dropEffect","String","blockRect","minusX","abs","minusY","_calculateBoundary","minHeight","useCallback","attrs","App","innerWidth","setCanvasAttr","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ee003816.chunk.js","sourcesContent":["const drawGrid = function (\n  canvas,\n  stepX = 10,\n  stepY = 10,\n  color = \"lightgray\",\n  lineWidth = 0.5\n) {\n  const ctx = canvas.getContext(\"2d\");\n  ctx.lineWidth = lineWidth;\n\n  for (let i = lineWidth, j = 0; i < canvas.width; i += stepX, j++) {\n    ctx.beginPath();\n    ctx.moveTo(i, 0);\n    ctx.lineTo(i, canvas.height);\n    if (j % 5 === 0) {\n      ctx.strokeStyle = \"darkgrey\";\n    } else {\n      ctx.strokeStyle = color;\n    }\n    ctx.stroke();\n  }\n\n  for (let i = lineWidth, j = 0; i < canvas.height; i += stepY, j++) {\n    ctx.beginPath();\n    ctx.moveTo(0, i);\n    ctx.lineTo(canvas.width, i);\n    if (j % 5 === 0) {\n      ctx.strokeStyle = \"darkgrey\";\n    } else {\n      ctx.strokeStyle = color;\n    }\n    ctx.stroke();\n  }\n};\n\nconst drawImage = function (canvas, image) {\n  if (!image) {\n    return;\n  }\n  const ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(image, 0, 0, image.width, image.height);\n};\n\nconst canvasDrawActiveLine = function (\n  canvas,\n  start = { x: 0, y: 0 },\n  end = { x: 0, y: 0 }\n) {\n  const ctx = canvas.getContext(\"2d\");\n  redrawBackground(canvas);\n  ctx.beginPath();\n  ctx.strokeStyle = \"#59c7f9\";\n  ctx.moveTo(start.x, start.y);\n  ctx.lineTo(end.x, start.y);\n  ctx.lineTo(end.x, end.y);\n  ctx.lineTo(start.x, end.y);\n  ctx.closePath();\n  ctx.stroke();\n};\n\nconst blocksInCanvasActiveArea = function (\n  blocks = [],\n  boundary = { left: 0, top: 0, right: 0, bottom: 0 }\n) {\n  const activeBlockIds = [];\n  blocks.forEach((block) => {\n    if (\n      !(\n        block.style.left > boundary.right ||\n        boundary.left >\n          block.style.left + (block.size.width || block.size.radius * 2)\n      ) &&\n      !(\n        block.style.top > boundary.bottom ||\n        boundary.top >\n          block.style.top + (block.size.height || block.size.radius * 2)\n      )\n    ) {\n      activeBlockIds.push(block.id);\n    }\n  });\n  return activeBlockIds;\n};\n\nconst redrawBackground = function (canvas, image, width, height) {\n  const ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, width || canvas.width, height || canvas.height);\n  if (image == null && typeof image == \"object\") {\n    //hack\n    canvas.image = image;\n  }\n  drawImage(canvas, image || canvas.image);\n  drawGrid(canvas);\n  return ctx;\n};\n\nconst serializeWidthAndHeightOnStyle = function (style) {\n  return { ...style, width: style.width + \"px\", height: style.height + \"px\" };\n};\n\nconst blockCreator = function (\n  {\n    id = \"\",\n    type = \"\",\n    left = 0,\n    top = 0,\n    width = 0,\n    height = 0,\n    color = \"\",\n    radius = 0,\n    isActive = false,\n    children = [],\n  },\n  { canvas = {}, extra = 0 }\n) {\n  // calculate boundary\n  if (left + width > canvas.width) {\n    left = canvas.width - width - extra;\n  }\n  if (left <= 0) {\n    left = 0;\n  }\n  if (top + height > canvas.height) {\n    top = canvas.height - height - extra;\n  }\n  if (top <= 0) {\n    top = 0;\n  }\n  if (width > canvas.width) {\n    width = canvas.width;\n  }\n  if (height > canvas.height) {\n    height = canvas.height;\n  }\n  return [\n    {\n      id: id || generateId(),\n      isActive,\n      type: type,\n      style: {\n        left,\n        top,\n      },\n      size: { width, height, color, radius },\n    },\n  ];\n};\n\nconst throttle = function (delay = 100) {\n  let _timers = [];\n  return function (fn, argus) {\n    if (_timers.length > 1) {\n      clearTimeout(_timers[0]);\n      _timers.shift();\n      return;\n    }\n    _timers.push(\n      setTimeout(function () {\n        fn(argus);\n      }, delay)\n    );\n  };\n};\n\nconst blockGroupBoundaryMin = function (\n  blocks = [],\n  side = \"top\",\n  filterAll = false\n) {\n  let _value = [];\n  blocks.forEach((block) => {\n    if (block.isActive || filterAll) {\n      _value.push(block.style[side]);\n    }\n  });\n  let minValue = Math.min(..._value);\n  return [minValue === 0, minValue];\n};\nconst blockGroupBoundaryMax = function (\n  blocks = [],\n  extra = \"width\",\n  side = \"top\",\n  max = 0,\n  filterAll = false\n) {\n  let _value = [];\n  blocks.forEach((block) => {\n    if (block.isActive || filterAll) {\n      _value.push(block.style[side] + block.size[extra]);\n    }\n  });\n  let maxValue = Math.max(..._value);\n  return [maxValue === max, maxValue];\n};\n\nconst blockGroup = function (blocks = []) {\n  const activeBlock = [];\n  const inactiveBlock = [];\n  blocks.forEach((block) => {\n    if (block.isActive) {\n      activeBlock.push(block);\n    } else {\n      inactiveBlock.push(block);\n    }\n  });\n  return [activeBlock, inactiveBlock];\n};\n\nconst blockShortCutKeyMap = function (\n  event,\n  {\n    canvas = {},\n    remove = function (activeIds = []) {},\n    add = function (newBlocks = []) {},\n    update = function (id = \"\", block = {}) {},\n  }\n) {\n  return {\n    Backspace: function (blocks = []) {\n      event.preventDefault();\n      event.stopPropagation();\n      let selectedIds = [];\n      blocks.forEach((block) => {\n        if (block.isActive) {\n          selectedIds.push(block.id);\n        }\n      });\n      remove(selectedIds);\n    },\n    KeyC: function () {\n      if (event.metaKey) {\n        event.preventDefault();\n        event.stopPropagation();\n        console.log(\"copy\");\n      }\n    },\n    KeyV: function (blocks = []) {\n      if (event.metaKey) {\n        event.preventDefault();\n        event.stopPropagation();\n        let newBlocks = [];\n        blocks.forEach((block, i) => {\n          if (block.isActive) {\n            const { type, style, size } = block;\n            const [newBlock] = blockCreator(\n              {\n                type,\n                isActive: true,\n                id: generateId(),\n                left: style.left + 10,\n                top: style.top + 10,\n                ...size,\n              },\n              { canvas, extra: 15 }\n            );\n            newBlocks.push(newBlock);\n          }\n        });\n        add(newBlocks, true);\n      }\n    },\n    ArrowUp: function (blocks = []) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (blockGroupBoundaryMin([...blocks], \"top\")[0]) {\n        return;\n      }\n\n      let newBlocks = [];\n\n      blocks.forEach((block) => {\n        if (block.isActive) {\n          let top = block.style.top;\n          top -= 1;\n          if (top >= 0) {\n            const [newBlock] = blockCreator(\n              {\n                ...block,\n                ...block.size,\n                ...block.style,\n                top,\n              },\n              { canvas, side: \"top\" }\n            );\n            newBlocks.push(newBlock);\n          }\n        }\n      });\n      update(newBlocks);\n    },\n    ArrowRight: function (blocks = []) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (\n        blockGroupBoundaryMax([...blocks], \"width\", \"left\", canvas.width)[0]\n      ) {\n        return;\n      }\n\n      let newBlocks = [];\n      blocks.forEach((block) => {\n        if (block.isActive) {\n          let left = block.style.left;\n          left += 1;\n          if (left + block.size.width <= canvas.width) {\n            const [newBlock] = blockCreator(\n              {\n                ...block,\n                ...block.size,\n                ...block.style,\n                left,\n              },\n              { canvas, side: \"right\" }\n            );\n            newBlocks.push(newBlock);\n          }\n        }\n      });\n      update(newBlocks);\n    },\n    ArrowDown: function (blocks = []) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (\n        blockGroupBoundaryMax([...blocks], \"height\", \"top\", canvas.height)[0]\n      ) {\n        return;\n      }\n\n      let newBlocks = [];\n      blocks.forEach((block) => {\n        if (block.isActive) {\n          let top = block.style.top;\n          top += 1;\n          if (top + block.size.height <= canvas.height) {\n            const [newBlock] = blockCreator(\n              {\n                ...block,\n                ...block.size,\n                ...block.style,\n                top,\n              },\n              { canvas, side: \"bottom\" }\n            );\n            newBlocks.push(newBlock);\n          }\n        }\n      });\n      update(newBlocks);\n    },\n    ArrowLeft: function (blocks = []) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (blockGroupBoundaryMin([...blocks], \"left\")[0]) {\n        return;\n      }\n\n      let newBlocks = [];\n      blocks.forEach((block) => {\n        if (block.isActive) {\n          let left = block.style.left;\n          left -= 1;\n          if (left >= 0) {\n            const [newBlock] = blockCreator(\n              {\n                ...block,\n                ...block.size,\n                ...block.style,\n                left,\n              },\n              { canvas, side: \"left\" }\n            );\n            newBlocks.push(newBlock);\n          }\n        }\n      });\n      update(newBlocks);\n    },\n  };\n};\n\nconst generateId = (function () {\n  let id = 0;\n  return function () {\n    return id++;\n  };\n})();\n\nconst calculateBlockGroupHeight = function (blocks = [], margin = 0) {\n  let _blocksheights = [0];\n  blocks.forEach((block) => {\n    _blocksheights.push(block.style.top + block.size.height);\n  });\n  return Math.max(..._blocksheights) + margin;\n};\n\nexport {\n  drawGrid,\n  drawImage,\n  canvasDrawActiveLine,\n  blocksInCanvasActiveArea,\n  serializeWidthAndHeightOnStyle,\n  blockCreator,\n  throttle,\n  blockShortCutKeyMap,\n  redrawBackground,\n  calculateBlockGroupHeight,\n  blockGroupBoundaryMin,\n  blockGroupBoundaryMax,\n  blockGroup,\n  generateId,\n};\n","import { Component } from \"react\";\nimport \"./Block.scss\";\n\nclass Base extends Component {\n  constructor(props) {\n    super(props);\n    this._handleDragStart = this._handleDragStart.bind(this);\n  }\n  _className = \"block-square\";\n  static _type = \"square\";\n  _handleDragStart(event) {\n    const { x, y } = event.target.getBoundingClientRect();\n    event.dataTransfer.setData(\n      \"block\",\n      JSON.stringify({\n        X: event.clientX - x,\n        Y: event.clientY - y,\n        type: this.constructor._type,\n      })\n    );\n  }\n  render() {\n    const _preset = getBlockByType(this.constructor._type)[1];\n    const { children = \"\", style = {}, size = _preset.size } = this.props;\n    return (\n      <div\n        type=\"block\"\n        className={this._className}\n        onDragStart={this._handleDragStart}\n        {...this.props}\n        style={{\n          ...style,\n          width: parseInt(size.width || size.radius * 2),\n          height: parseInt(size.height || size.radius * 2),\n          backgroundColor: size.color,\n        }}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\nclass Circle extends Base {\n  _className = \"block-circle\";\n  static _type = \"circle\";\n}\n\nclass Square extends Base {\n  _className = \"block-square\";\n  static _type = \"square\";\n}\n\n//添加预设组\nclass Group extends Base {\n  _className = \"block-group\";\n  static _type = \"group\";\n  _renderItems(blocks = []) {\n    return blocks.map((block, index) => {\n      const [Comp] = getBlockByType(block.type);\n      block.style.position = \"absolute\";\n      return (\n        <Comp key={index} {...block}>\n          {this.props.children}\n        </Comp>\n      );\n    });\n  }\n  render() {\n    const _preset = getBlockByType(this.constructor._type)[1];\n    const { style = {}, size = _preset.size } = this.props;\n    return (\n      <div\n        type=\"block\"\n        className={this._className}\n        onDragStart={this._handleDragStart}\n        {...this.props}\n        style={{\n          ...style,\n          width: parseInt(size.width || size.radius * 2),\n          height: parseInt(size.height || size.radius * 2),\n          backgroundColor: size.color,\n          position: \"relative\",\n        }}\n      >\n        {this._renderItems(_preset.items)}\n      </div>\n    );\n  }\n}\n\nclass PostBlock extends Group {\n  static _type = \"post-block\";\n}\nclass PostBlock2 extends Group {\n  static _type = \"post-block2\";\n}\nclass UserTagBlock extends Group {\n  static _type = \"user-tag-block\";\n}\nclass UserTagBlock2 extends Group {\n  static _type = \"user-tag-block2\";\n}\n\nclass PostFormBlock extends Group {\n  static _type = \"post-form-block\";\n}\nclass PostFormBlock2 extends Group {\n  static _type = \"post-form-block2\";\n}\n\nclass UserInfoBlock extends Group {\n  static _type = \"user-info-block\";\n}\n\nclass UserInfoBlock2 extends Group {\n  static _type = \"user-info-block2\";\n}\n\nclass CourseListBlock extends Group {\n  static _type = \"course-list-block\";\n}\n\nclass CourseListBlock2 extends Group {\n  static _type = \"course-list-block2\";\n}\n\nclass CopyrightBlock extends Group {\n  static _type = \"copyright-block\";\n}\n\nconst BlockLists = function ({ blocks = [], draggable = false }) {\n  return blocks.map((block, index) => {\n    const [Comp] = getBlockByType(block.type);\n    return <Comp key={index} draggable={draggable} {...block} />;\n  });\n};\n\nconst getBlockByType = function (type = Square._type) {\n  const blockMap = new Map([\n    [Square._type, Square],\n    [Circle._type, Circle],\n    [PostBlock._type, PostBlock],\n    [PostBlock2._type, PostBlock2],\n    [UserTagBlock._type, UserTagBlock],\n    [UserTagBlock2._type, UserTagBlock2],\n    [PostFormBlock._type, PostFormBlock],\n    [PostFormBlock2._type, PostFormBlock2],\n    [UserInfoBlock._type, UserInfoBlock],\n    [UserInfoBlock2._type, UserInfoBlock2],\n    [CourseListBlock._type, CourseListBlock],\n    [CourseListBlock2._type, CourseListBlock2],\n    [CopyrightBlock._type, CopyrightBlock],\n  ]);\n  if (!blockMap.has(type)) {\n    return [null, null];\n  }\n  return [blockMap.get(type), presets.find((preset) => preset.type === type)];\n};\n\nconst presets = [\n  {\n    type: Square._type,\n    size: {\n      width: 100,\n      height: 100,\n      color: \"#d3d3d3\",\n    },\n  },\n  {\n    type: Circle._type,\n    size: {\n      radius: 50,\n      color: \"#d3d3d3\",\n    },\n  },\n  {\n    type: PostBlock._type,\n    size: {\n      width: 710,\n      height: 468,\n    },\n    style: {},\n    items: [\n      {\n        type: \"square\",\n        size: { width: 708, height: 466, color: \"#ffffff\", radius: 354 },\n        style: { left: 0, top: 0 },\n      },\n      {\n        type: \"circle\",\n        size: { width: 60, height: 60, color: \"#d3d3d3\", radius: 30 },\n        style: { left: 19, top: 21 },\n      },\n      {\n        type: \"square\",\n        size: { width: 68, height: 22, color: \"#d3d3d3\", radius: 34 },\n        style: { left: 100, top: 17 },\n      },\n      {\n        type: \"square\",\n        size: { width: 147, height: 20, color: \"#d3d3d3\", radius: 73.5 },\n        style: { left: 100, top: 45 },\n      },\n      {\n        type: \"square\",\n        size: { width: 147, height: 20, color: \"#d3d3d3\", radius: 73.5 },\n        style: { left: 100, top: 70 },\n      },\n      {\n        type: \"square\",\n        size: { width: 49, height: 28, color: \"#d3d3d3\", radius: 24.5 },\n        style: { left: 641, top: 21 },\n      },\n      {\n        type: \"square\",\n        size: { width: 217, height: 20, color: \"#d3d3d3\", radius: 108.5 },\n        style: { left: 15, top: 95 },\n      },\n      {\n        type: \"square\",\n        size: { width: 191, height: 20, color: \"#d3d3d3\", radius: 95.5 },\n        style: { left: 15, top: 122 },\n      },\n      {\n        type: \"square\",\n        size: { width: 223, height: 20, color: \"#d3d3d3\", radius: 111.5 },\n        style: { left: 15, top: 150 },\n      },\n      {\n        type: \"square\",\n        size: { width: 342, height: 20, color: \"#d3d3d3\", radius: 171 },\n        style: { left: 15, top: 176 },\n      },\n      {\n        type: \"square\",\n        size: { width: 390, height: 20, color: \"#d3d3d3\", radius: 195 },\n        style: { left: 15, top: 204 },\n      },\n      {\n        type: \"square\",\n        size: { width: 300, height: 20, color: \"#d3d3d3\", radius: 150 },\n        style: { left: 15, top: 233 },\n      },\n      {\n        type: \"square\",\n        size: { width: 250, height: 20, color: \"#d3d3d3\", radius: 125 },\n        style: { left: 15, top: 268 },\n      },\n      {\n        type: \"square\",\n        size: { width: 143, height: 38, color: \"#d3d3d3\", radius: 71.5 },\n        style: { left: 21, top: 313 },\n      },\n      {\n        type: \"square\",\n        size: { width: 710, height: 97, color: \"#d3d3d3\", radius: 355 },\n        style: { left: 0, top: 371 },\n      },\n    ],\n  },\n  {\n    type: PostBlock2._type,\n    size: { width: 710, height: 300 },\n    items: [\n      {\n        type: \"square\",\n        style: { left: 0, top: 0 },\n        size: { width: 708, height: 466, color: \"#ffffff\", radius: 354 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 17 },\n        size: { width: 75, height: 75, color: \"#d3d3d3\", radius: 0 },\n      },\n      {\n        type: \"square\",\n        style: { left: 100, top: 17 },\n        size: { width: 68, height: 22, color: \"#d3d3d3\", radius: 34 },\n      },\n      {\n        type: \"square\",\n        style: { left: 100, top: 45 },\n        size: { width: 147, height: 20, color: \"#d3d3d3\", radius: 73.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 121 },\n        size: { width: 390, height: 20, color: \"#d3d3d3\", radius: 195 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 150 },\n        size: { width: 300, height: 20, color: \"#d3d3d3\", radius: 150 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 185 },\n        size: { width: 250, height: 20, color: \"#d3d3d3\", radius: 125 },\n      },\n      {\n        type: \"square\",\n        style: { left: 0, top: 371 },\n        size: { width: 710, height: 97, color: \"#d3d3d3\", radius: 355 },\n      },\n    ],\n  },\n  {\n    type: UserTagBlock._type,\n    size: { width: 710, height: 100 },\n    items: [\n      {\n        type: \"square\",\n        size: { width: 709, height: 188, radius: 354.5, color: \"#ffffff\" },\n        style: { left: 0, top: 0 },\n      },\n      {\n        type: \"square\",\n        size: { width: 103, height: 20, radius: 51.5, color: \"#d3d3d3\" },\n        style: { left: 15, top: 20 },\n      },\n      {\n        type: \"square\",\n        size: { width: 78, height: 20, radius: 39, color: \"#d3d3d3\" },\n        style: { left: 127, top: 20 },\n      },\n      {\n        type: \"square\",\n        size: { width: 93, height: 20, radius: 46.5, color: \"#d3d3d3\" },\n        style: { left: 595, top: 20 },\n      },\n      {\n        type: \"square\",\n        size: { width: 78, height: 20, radius: 39, color: \"#d3d3d3\" },\n        style: { left: 23, top: 50 },\n      },\n      {\n        type: \"square\",\n        size: { width: 78, height: 20, radius: 39, color: \"#d3d3d3\" },\n        style: { left: 15, top: 87 },\n      },\n      {\n        type: \"square\",\n        size: { width: 78, height: 20, radius: 39, color: \"#d3d3d3\" },\n        style: { left: 15, top: 120 },\n      },\n      {\n        type: \"square\",\n        size: { width: 131, height: 20, radius: 65.5, color: \"#d3d3d3\" },\n        style: { left: 496, top: 150 },\n      },\n      {\n        type: \"square\",\n        size: { width: 35, height: 20, radius: 17.5, color: \"#d3d3d3\" },\n        style: { left: 650, top: 150 },\n      },\n    ],\n  },\n  {\n    type: UserTagBlock2._type,\n    size: { width: 710, height: 200 },\n    items: [\n      {\n        type: \"square\",\n        style: { left: 0, top: 0 },\n        size: { width: 709, height: 188, color: \"#ffffff\", radius: 354.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 20 },\n        size: { width: 103, height: 20, color: \"#d3d3d3\", radius: 51.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 127, top: 20 },\n        size: { width: 78, height: 20, color: \"#d3d3d3\", radius: 39 },\n      },\n      {\n        type: \"square\",\n        style: { left: 595, top: 20 },\n        size: { width: 93, height: 20, color: \"#d3d3d3\", radius: 46.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 87 },\n        size: { width: 78, height: 20, color: \"#d3d3d3\", radius: 39 },\n      },\n      {\n        type: \"square\",\n        style: { left: 496, top: 150 },\n        size: { width: 131, height: 20, color: \"#d3d3d3\", radius: 65.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 650, top: 150 },\n        size: { width: 35, height: 20, color: \"#d3d3d3\", radius: 17.5 },\n      },\n    ],\n  },\n  {\n    type: PostFormBlock._type,\n    size: {\n      width: 710,\n      height: 100,\n    },\n    style: {},\n    items: [\n      {\n        type: \"square\",\n        size: { width: 177, height: 29, color: \"#ffffff\", radius: 88.5 },\n        style: { left: 533, top: 5 },\n      },\n      {\n        type: \"square\",\n        size: { width: 73, height: 20, color: \"#d3d3d3\", radius: 36.5 },\n        style: { left: 451, top: 12 },\n      },\n      {\n        type: \"square\",\n        size: { width: 51, height: 20, color: \"#d3d3d3\", radius: 25.5 },\n        style: { left: 86, top: 11 },\n      },\n      {\n        type: \"square\",\n        size: { width: 51, height: 20, color: \"#d3d3d3\", radius: 25.5 },\n        style: { left: 159, top: 11 },\n      },\n      {\n        type: \"square\",\n        size: { width: 79, height: 43, color: \"#ffffff\", radius: 39.5 },\n        style: { left: 0, top: 0 },\n      },\n      {\n        type: \"square\",\n        size: { width: 51, height: 20, color: \"#d3d3d3\", radius: 25.5 },\n        style: { left: 15, top: 11 },\n      },\n      {\n        type: \"square\",\n        size: { width: 710, height: 76, color: \"#ffffff\", radius: 355 },\n        style: { left: 0, top: 41 },\n      },\n      {\n        type: \"circle\",\n        size: { width: 50, height: 50, color: \"#d3d3d3\", radius: 25 },\n        style: { left: 11, top: 51 },\n      },\n      {\n        type: \"square\",\n        size: { width: 460, height: 18, color: \"#d3d3d3\", radius: 230 },\n        style: { left: 68, top: 68 },\n      },\n    ],\n  },\n  {\n    type: UserInfoBlock._type,\n    size: { width: 260, height: 195 },\n    items: [\n      {\n        type: \"square\",\n        size: { width: 259, height: 67, radius: 129.5, color: \"#d3d3d3\" },\n        style: { left: 0, top: 0 },\n      },\n      {\n        type: \"square\",\n        size: { width: 260, height: 130, radius: 130, color: \"#ffffff\" },\n        style: { left: 0, top: 67 },\n      },\n      {\n        type: \"circle\",\n        size: { width: 80, height: 80, radius: 40, color: \"#ffffff\" },\n        style: { left: 19, top: 37 },\n      },\n      {\n        type: \"circle\",\n        size: { width: 72, height: 72, radius: 36, color: \"#d3d3d3\" },\n        style: { left: 23, top: 41 },\n      },\n      {\n        type: \"square\",\n        size: { width: 85, height: 20, radius: 42.5, color: \"#d3d3d3\" },\n        style: { left: 105, top: 72 },\n      },\n      {\n        type: \"square\",\n        size: { width: 59, height: 20, radius: 29.5, color: \"#d3d3d3\" },\n        style: { left: 105, top: 95 },\n      },\n      {\n        type: \"circle\",\n        size: { width: 24, height: 24, radius: 12, color: \"#d3d3d3\" },\n        style: { left: 14, top: 104 },\n      },\n      {\n        type: \"square\",\n        size: { width: 59, height: 20, radius: 29.5, color: \"#d3d3d3\" },\n        style: { left: 106, top: 137 },\n      },\n      {\n        type: \"circle\",\n        size: { width: 32, height: 32, radius: 16, color: \"#d3d3d3\" },\n        style: { left: 143, top: 127 },\n      },\n      {\n        type: \"square\",\n        size: { width: 52, height: 31, radius: 26, color: \"#d3d3d3\" },\n        style: { left: 184, top: 127 },\n      },\n      {\n        type: \"square\",\n        size: { width: 140, height: 13, radius: 70, color: \"#d3d3d3\" },\n        style: { left: 100, top: 163 },\n      },\n    ],\n  },\n  {\n    type: UserInfoBlock2._type,\n    size: { width: 710, height: 195 },\n    items: [\n      {\n        type: \"square\",\n        style: { left: 0, top: 0 },\n        size: { width: 259, height: 67, color: \"#d3d3d3\", radius: 129.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 0, top: 67 },\n        size: { width: 260, height: 130, color: \"#ffffff\", radius: 130 },\n      },\n      {\n        type: \"square\",\n        style: { left: 19, top: 37 },\n        size: { color: \"#ffffff\", width: 80, height: 80, radius: 40 },\n      },\n      {\n        type: \"square\",\n        style: { left: 23, top: 41 },\n        size: { color: \"#d3d3d3\", width: 72, height: 72, radius: 36 },\n      },\n      {\n        type: \"square\",\n        style: { left: 105, top: 72 },\n        size: { color: \"#d3d3d3\", width: 85, height: 15, radius: 0 },\n      },\n      {\n        type: \"square\",\n        style: { left: 105, top: 95 },\n        size: { color: \"#d3d3d3\", width: 59, height: 15, radius: 0 },\n      },\n      {\n        type: \"square\",\n        style: { left: 100, top: 141 },\n        size: { width: 140, height: 13, color: \"#d3d3d3\", radius: 70 },\n      },\n    ],\n  },\n  {\n    type: PostFormBlock2._type,\n    size: { width: 710, height: 200 },\n    items: [\n      {\n        type: \"square\",\n        style: { left: 533, top: 5 },\n        size: { width: 177, height: 29, color: \"#ffffff\", radius: 88.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 0, top: 0 },\n        size: { width: 79, height: 43, color: \"#ffffff\", radius: 39.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 11 },\n        size: { width: 51, height: 20, color: \"#d3d3d3\", radius: 25.5 },\n      },\n      {\n        type: \"square\",\n        style: { left: 0, top: 41 },\n        size: { width: 710, height: 76, color: \"#ffffff\", radius: 355 },\n      },\n      {\n        type: \"square\",\n        style: { left: 11, top: 51 },\n        size: { color: \"#d3d3d3\", width: 50, height: 50, radius: 25 },\n      },\n      {\n        type: \"square\",\n        style: { left: 68, top: 68 },\n        size: { width: 460, height: 18, color: \"#d3d3d3\", radius: 230 },\n      },\n    ],\n  },\n  {\n    type: CourseListBlock._type,\n    size: { width: 260, height: 100 },\n    items: [\n      {\n        type: \"square\",\n        size: { width: 260, height: 165, color: \"#ffffff\", radius: 130 },\n        style: { left: 0, top: 0 },\n      },\n      {\n        type: \"square\",\n        size: { width: 161, height: 20, color: \"#d3d3d3\", radius: 80.5 },\n        style: { left: 11, top: 17 },\n      },\n      {\n        type: \"square\",\n        size: { width: 59, height: 20, color: \"#d3d3d3\", radius: 29.5 },\n        style: { left: 199, top: 17 },\n      },\n      {\n        type: \"square\",\n        size: { width: 188, height: 20, color: \"#d3d3d3\", radius: 94 },\n        style: { left: 11, top: 68 },\n      },\n      {\n        type: \"square\",\n        size: { width: 149, height: 20, color: \"#d3d3d3\", radius: 74.5 },\n        style: { left: 35, top: 100 },\n      },\n      {\n        type: \"square\",\n        size: { width: 214, height: 20, color: \"#d3d3d3\", radius: 107 },\n        style: { left: 35, top: 132 },\n      },\n    ],\n  },\n  {\n    type: CourseListBlock2._type,\n    size: { width: 214, height: 200 },\n    items: [\n      {\n        type: \"square\",\n        style: { left: 0, top: 0 },\n        size: { width: 260, height: 165, color: \"#ffffff\", radius: 130 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 17 },\n        size: { color: \"#d3d3d3\", width: 161, height: 20, radius: 0 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 100 },\n        size: { color: \"#d3d3d3\", width: 149, height: 20, radius: 0 },\n      },\n      {\n        type: \"square\",\n        style: { left: 15, top: 132 },\n        size: { color: \"#d3d3d3\", width: 214, height: 20, radius: 0 },\n      },\n    ],\n  },\n  {\n    type: CopyrightBlock._type,\n    size: {\n      width: 260,\n      height: 200,\n    },\n    items: [\n      {\n        type: \"square\",\n        size: { width: 228, height: 20, color: \"#d3d3d3\", radius: 114 },\n        style: { left: 15, top: 0 },\n      },\n      {\n        type: \"square\",\n        size: { width: 20, height: 20, color: \"#d3d3d3\", radius: 10 },\n        style: { left: 34, top: 49 },\n      },\n      {\n        type: \"square\",\n        size: { width: 20, height: 20, color: \"#d3d3d3\", radius: 10 },\n        style: { left: 68, top: 49 },\n      },\n      {\n        type: \"square\",\n        size: { width: 20, height: 20, color: \"#d3d3d3\", radius: 10 },\n        style: { left: 102, top: 49 },\n      },\n      {\n        type: \"square\",\n        size: { width: 20, height: 20, color: \"#d3d3d3\", radius: 10 },\n        style: { left: 137, top: 49 },\n      },\n      {\n        type: \"square\",\n        size: { width: 20, height: 20, color: \"#d3d3d3\", radius: 10 },\n        style: { left: 172, top: 49 },\n      },\n      {\n        type: \"square\",\n        size: { width: 20, height: 20, color: \"#d3d3d3\", radius: 10 },\n        style: { left: 206, top: 49 },\n      },\n      {\n        type: \"square\",\n        size: { width: 175, height: 18, color: \"#d3d3d3\", radius: 87.5 },\n        style: { left: 43, top: 95 },\n      },\n      {\n        type: \"square\",\n        size: { width: 105, height: 18, color: \"#d3d3d3\", radius: 52.5 },\n        style: { left: 78, top: 117 },\n      },\n      {\n        type: \"square\",\n        size: { width: 175, height: 18, color: \"#d3d3d3\", radius: 87.5 },\n        style: { left: 44, top: 145 },\n      },\n    ],\n  },\n];\n\nexport { Circle, Square, getBlockByType, presets };\nexport default BlockLists;\n","import { useEffect, useState } from \"react\";\nimport { blockCreator, blockShortCutKeyMap } from \"../utils/index\";\nimport { getBlockByType } from \"./Block\";\n\nconst BlockWrapper = function ({\n  block = {},\n  blocks = [],\n  children = \"\",\n  canvas = \"\",\n  setCurrentBlock = function () {},\n  removeBlock = function () {},\n  addBlock = function () {},\n}) {\n  const { id = \"\", style = {}, type = \"\", size = {}, isActive = false } = block;\n  const [Block] = getBlockByType(type);\n  const _handleClick = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (event.metaKey && !isActive) {\n      return setCurrentBlock([{ id, isActive: true }]);\n    }\n    setCurrentBlock([{ id, isActive: !isActive }], true);\n  };\n\n  const _handleKeyDown = function (event) {\n    if (\n      isActive &&\n      (event.target.getAttribute(\"type\") === \"block\" ||\n        event.target === document.body)\n    ) {\n      const _shortcutHandler =\n        blockShortCutKeyMap(event, {\n          canvas: canvas,\n          remove: removeBlock,\n          add: addBlock,\n          update: setCurrentBlock,\n        })[event.code] || function () {};\n      _shortcutHandler([...blocks]);\n    }\n  };\n\n  useEffect(() => {\n    if (isActive) {\n      window.addEventListener(\"keydown\", _handleKeyDown, false);\n      return () => {\n        window.removeEventListener(\"keydown\", _handleKeyDown, false);\n      };\n    }\n  });\n  useEffect(() => {\n    isActive && document.getElementById(id).focus();\n  });\n  return (\n    <Block\n      id={id}\n      style={{ ...style, position: \"absolute\", opacity: 0.8 }}\n      size={size}\n      tabIndex={isActive ? 1 : -1}\n      isactive={isActive ? isActive.toString() : undefined}\n      onClick={_handleClick}\n    >\n      {children}\n    </Block>\n  );\n};\n\nconst BlockActiveLine = function ({\n  block = {},\n  position = \"left\",\n  canvas = {},\n  isActive = false,\n  onLineMove = function () {},\n  activeStyle = function () {},\n}) {\n  const [isLineActive, setIsLineActive] = useState(false);\n  const _handleMouseDown = function (event) {\n    if (!isActive) {\n      return;\n    }\n    event.stopPropagation();\n    event.preventDefault();\n    const lineRect = event.target.getBoundingClientRect();\n\n    const newPosition = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n    };\n    const _move = function (e) {\n      if (position === \"left\" || position === \"right\") {\n        newPosition[position] = e.clientX - lineRect.x;\n      } else if (position === \"top\" || position === \"bottom\") {\n        newPosition[position] = e.clientY - lineRect.y;\n      }\n      onLineMove(block, newPosition, position);\n    };\n    const _up = function () {\n      document.removeEventListener(\"mousemove\", _move, false);\n      document.removeEventListener(\"mouseup\", _up, false);\n      //以下代码被注释:用dom 替代canvas绘画规划线\n      //   redrawBackground(canvas);\n    };\n    document.addEventListener(\"mousemove\", _move, false);\n    document.addEventListener(\"mouseup\", _up, false);\n  };\n  return (\n    <i\n      className={`block-wrapper-${position}`}\n      onMouseDown={_handleMouseDown}\n      onMouseOver={() => setIsLineActive(true)}\n      onMouseOut={() => setIsLineActive(false)}\n      style={isLineActive ? activeStyle(canvas, block.style) : {}}\n    ></i>\n  );\n};\n\nconst RenderBlocks = function ({\n  blocks = [],\n  children = \"\",\n  canvas = \"\",\n  onUpdateBlock = function () {},\n}) {\n  const lines = [\n    [\n      \"top\",\n      function (canvas = {}, { left = 0 }) {\n        return {\n          left: `${-left}px`,\n          width: `${canvas.width}px`,\n        };\n      },\n    ],\n    [\n      \"right\",\n      function (canvas = {}, { top = 0 }) {\n        return {\n          top: `${-top}px`,\n          height: `${canvas.height}px`,\n        };\n      },\n    ],\n    [\n      \"bottom\",\n      function (canvas = {}, { left = 0 }) {\n        return {\n          left: `${-left}px`,\n          width: `${canvas.width}px`,\n        };\n      },\n    ],\n    [\n      \"left\",\n      function (canvas = {}, { top = 0 }) {\n        return {\n          top: `${-top}px`,\n          height: `${canvas.height}px`,\n        };\n      },\n    ],\n  ];\n\n  const _handleUpdateBlock = function (blockItems = [], isResetActive = false) {\n    const activeBlockIds = [];\n    const newBlocks = blocks.map((block) => {\n      let item = blockItems.find((item) => item.id === block.id) || {};\n      if (isResetActive) {\n        block.isActive = false;\n      }\n      block = { ...block, ...item };\n      if (block.isActive) {\n        activeBlockIds.push(block.id);\n      }\n      return { ...block, ...item };\n    });\n    onUpdateBlock(newBlocks, activeBlockIds);\n  };\n  const _handleRemoveBlock = function (selectedIds = []) {\n    onUpdateBlock(\n      blocks.filter((block) => selectedIds.indexOf(block.id) === -1)\n    );\n  };\n  const _handleAddBlock = function (newBlocks = [], isResetActive = false) {\n    const activeIds = [];\n    blocks.forEach((block) => {\n      if (block.isActive) {\n        !isResetActive && activeIds.push(block.id);\n      }\n    });\n    newBlocks.forEach((block) => activeIds.push(block.id));\n    onUpdateBlock([...blocks, ...newBlocks], activeIds);\n  };\n\n  const _handleLineMove = function (\n    currentBlock = {},\n    { left = 0, right = 0, top = 0, bottom = 0 },\n    position\n  ) {\n    const [newBlock] = blockCreator(\n      {\n        ...currentBlock,\n        ...currentBlock.size,\n        ...currentBlock.style,\n      },\n      { canvas: canvas }\n    );\n\n    if (currentBlock.type === \"square\") {\n      switch (position) {\n        case \"top\":\n          newBlock.size.height = currentBlock.size.height - top;\n          newBlock.style.top = top + currentBlock.style.top;\n          break;\n        case \"right\":\n          newBlock.size.width = right + currentBlock.size.width;\n          break;\n        case \"bottom\":\n          newBlock.size.height = bottom + currentBlock.size.height;\n          break;\n        case \"left\":\n          newBlock.size.width = currentBlock.size.width - left;\n          newBlock.style.left = left + currentBlock.style.left;\n          break;\n        default:\n          break;\n      }\n    } else if (currentBlock.type === \"circle\") {\n      let minus = top || right || bottom || left;\n\n      switch (position) {\n        case \"left\":\n        case \"top\":\n          minus *= -1;\n          break;\n        default:\n          minus *= 1;\n          break;\n      }\n      newBlock.style.top = currentBlock.style.top - minus;\n      newBlock.style.left = currentBlock.style.left - minus;\n      newBlock.size.radius = currentBlock.size.radius + minus;\n\n      newBlock.size.width = newBlock.size.radius * 2;\n      newBlock.size.height = newBlock.size.radius * 2;\n    }\n\n    if (\n      newBlock.size.width <= 10 ||\n      newBlock.size.height <= 10 ||\n      newBlock.style.left + newBlock.size.width > canvas.width ||\n      newBlock.style.top + newBlock.size.height > canvas.height ||\n      //限定圆不能出画布边界\n      newBlock.style.left < 0 ||\n      newBlock.style.top < 0\n    ) {\n      return;\n    }\n    //以下代码被注释:用dom 替代canvas绘画规划线\n    // drawGuideline(canvas, { ...newBlock.size, ...newBlock.style }, position);\n\n    newBlock.isActive = true;\n\n    _handleUpdateBlock([newBlock], true);\n  };\n\n  return blocks.map((block, index) => (\n    <BlockWrapper\n      key={index}\n      canvas={canvas}\n      isActive={block.isActive}\n      addBlock={_handleAddBlock}\n      setCurrentBlock={_handleUpdateBlock}\n      removeBlock={_handleRemoveBlock}\n      block={block}\n      blocks={blocks}\n    >\n      {lines.map(([line, activeStyle]) => {\n        return (\n          <BlockActiveLine\n            canvas={canvas}\n            key={line}\n            block={block}\n            position={line}\n            isActive={block.isActive}\n            activeStyle={activeStyle}\n            onLineMove={_handleLineMove}\n          />\n        );\n      })}\n    </BlockWrapper>\n  ));\n};\n\nexport { RenderBlocks };\n","import { Children, cloneElement, useEffect, useRef } from \"react\";\nimport {\n  blocksInCanvasActiveArea,\n  canvasDrawActiveLine,\n  redrawBackground,\n  serializeWidthAndHeightOnStyle,\n} from \"../utils\";\n\nconst Canvas = function ({\n  children,\n  width = 450,\n  height = 350,\n  image = null,\n  blocks = {},\n  onUpdateBlock = function () {},\n  onDrop = function () {},\n  onDragOver = function () {},\n  onMouseDown = function () {},\n}) {\n  const canvasRef = useRef();\n  useEffect(() => {\n    redrawBackground(canvasRef.current, image, width, height);\n  }, [height, image, width]);\n  useEffect(() => {\n    canvasRef.current.image = image;\n  }, [image]);\n\n  const CanvasChildren = function ({ children }) {\n    return Children.map(children, (child) => {\n      return cloneElement(child, {\n        canvas: canvasRef.current,\n        blocks: blocks,\n      });\n    });\n  };\n  const _handleDragOver = function (event) {\n    event.target.style.zIndex = 2;\n    onDragOver(event);\n  };\n  const _handleDrop = function (event) {\n    event.target.style.zIndex = 0;\n    onDrop(event);\n  };\n  const _handleDragLeave = function (event) {\n    event.target.style.zIndex = 0;\n  };\n  const _handleMouseMove = function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n    event.target.style.zIndex = 2;\n\n    const canvasRect = event.target.getBoundingClientRect();\n    const pointStart = {\n      x: event.clientX - canvasRect.x,\n      y: event.clientY - canvasRect.y,\n    };\n    let activeBlockIds = [];\n\n    const _move = function (e) {\n      let movePoint = {\n        x: e.clientX - canvasRect.x,\n        y: e.clientY - canvasRect.y,\n      };\n      canvasDrawActiveLine(event.target, pointStart, movePoint);\n      activeBlockIds = blocksInCanvasActiveArea(blocks, {\n        left: Math.min(pointStart.x, movePoint.x),\n        top: Math.min(pointStart.y, movePoint.y),\n        right: Math.max(pointStart.x, movePoint.x),\n        bottom: Math.max(pointStart.y, movePoint.y),\n      });\n    };\n    const _up = (e) => {\n      event.target.removeEventListener(\"mousemove\", _move);\n      event.target.removeEventListener(\"mouseup\", _up);\n      event.target.removeEventListener(\"mouseout\", _up);\n      event.target.style.zIndex = 0;\n      redrawBackground(event.target);\n      onUpdateBlock(blocks, activeBlockIds);\n    };\n    event.target.addEventListener(\"mousemove\", _move);\n    event.target.addEventListener(\"mouseup\", _up);\n    event.target.addEventListener(\"mouseout\", _up);\n  };\n  return (\n    <div\n      className=\"playground-canvas\"\n      style={serializeWidthAndHeightOnStyle({ width: width, height: height })}\n    >\n      <canvas\n        width={width}\n        height={height}\n        onDrop={_handleDrop}\n        onDragOver={_handleDragOver}\n        onDragLeave={_handleDragLeave}\n        onMouseDown={_handleMouseMove}\n        ref={canvasRef}\n      />\n      <div onMouseDown={(event) => onMouseDown(event, canvasRef)}>\n        <CanvasChildren children={children} />\n      </div>\n    </div>\n  );\n};\n\nexport default Canvas;\n","import { generateId, serializeWidthAndHeightOnStyle } from \"../utils/index\";\nimport Canvas from \"./Canvas\";\nimport \"./RenderResult.scss\";\n\nconst parseCodeToStyle = function (code = \"\") {\n  const result = [];\n  const blockRegx = new RegExp(\n    /(radial|linear)-gradient\\(([^)]*)\\)(,\\s?\\d+(\\.*\\d*)(px|rem|%)?\\s{1}\\d+(\\.*\\d*)(px|rem|%)?){2}/g\n  );\n  const colorReg = new RegExp(/#\\S+\\d{0}/gi);\n  const digitReg = new RegExp(\n    /,\\s?\\d+(\\.*\\d*)(px|rem|%)?\\s{1}\\d+(\\.*\\d*)(px|rem|%)?/g\n  );\n\n  const codeGroup = code.match(blockRegx) || [];\n  const _getType = function (code = \"\") {\n    if (code.indexOf(\"radial-gradient\") >= 0) {\n      return \"circle\";\n    } else if (code.indexOf(\"linear-gradient\") >= 0) {\n      return \"square\";\n    }\n  };\n  const _getSize = function (code) {\n    const [size = \"\", position = \"\"] = code.match(digitReg) || [];\n    const [color = \"\"] = code.match(colorReg) || [];\n    const [width = \"\", height = \"\"] = size.replace(\",\", \"\").trim().split(\" \");\n    const [left = \"\", top = \"\"] = position.replace(\",\", \"\").trim().split(\" \");\n    return [\n      {\n        width: parseInt(width),\n        height: parseInt(height),\n        radius: parseInt(width) / 2,\n        color: color,\n      },\n      { left: parseInt(left), top: parseInt(top) },\n    ];\n  };\n  for (let i = 0; i < codeGroup.length; i++) {\n    const [size, style] = _getSize(codeGroup[i]);\n    const type = _getType(codeGroup[i]);\n    const data = {\n      id: generateId(),\n      type,\n      size,\n      style,\n    };\n    result.unshift(data);\n  }\n  return result;\n};\n\nconst _parseStyleToCode = function (images = [], sizes = [], positions = []) {\n  let codes = [];\n  images.forEach((image, i) => {\n    codes.push(`(${image},${sizes[i]},${positions[i]})`);\n  });\n  return codes.length ? `(${codes.join(\",\")});` : \"\";\n};\n\nconst _generateStyles = function (blocks = [], width = 450, height = 350) {\n  let styles = {};\n  let backgroundImages = [];\n  let backgroundPositions = [];\n  let backgroundSizes = [];\n  const imageMap = new Map([\n    [\n      \"square\",\n      ({ color = \"lightgray\" }) =>\n        `linear-gradient( ${color} 100%, transparent 0 )`,\n    ],\n    [\n      \"circle\",\n      ({ radius = 50, color = \"lightgray\" }) =>\n        `radial-gradient( circle ${radius}px at ${radius}px ${radius}px, ${color} 100%, transparent 0 )`,\n    ],\n  ]);\n  const sizeMap = new Map([\n    [\n      \"square\",\n      ({ width, height }) =>\n        `${width + \"px\" || \"100%\"} ${height + \"px\" || \"100%\"}`,\n    ],\n    [\"circle\", ({ radius }) => `${radius * 2}px ${radius * 2}px`],\n  ]);\n\n  for (let i = blocks.length - 1; i >= 0; i--) {\n    let block = blocks[i];\n    backgroundImages.push(imageMap.get(block.type)(block.size));\n    backgroundPositions.push(`${block.style.left}px ${block.style.top}px`);\n    backgroundSizes.push(sizeMap.get(block.type)(block.size));\n  }\n\n  styles[\"backgroundImage\"] = backgroundImages.join(\",\");\n  styles[\"backgroundPosition\"] = backgroundPositions.join(\",\");\n  styles[\"backgroundSize\"] = backgroundSizes.join(\",\");\n  styles[\"width\"] = width;\n  styles[\"height\"] = height;\n  return [\n    serializeWidthAndHeightOnStyle(styles),\n    _parseStyleToCode(backgroundImages, backgroundSizes, backgroundPositions),\n  ];\n};\n\nconst RenderResult = function ({ blocks = [], width = 450, height = 350 }) {\n  const [styles, code] = _generateStyles(blocks, width, height);\n  const _selectText = function (event) {\n    event.target.select();\n    document.execCommand(\"copy\");\n  };\n  const formatCode = function (code) {\n    return `\n    @mixin skeleton-screen-bg-creator($images, $width, $height) {\n        $imagesArr: ();\n        $sizeArr: ();\n        $positionArr: ();\n    \n        @for $i from 1 through length($images) {\n            $imagesArr: append(\n                $imagesArr,\n                nth(nth($images, $i), 1),\n                $separator: comma\n            );\n            $sizeArr: append($sizeArr, nth(nth($images, $i), 2), $separator: comma);\n            $positionArr: append(\n                $positionArr,\n                nth(nth($images, $i), 3),\n                $separator: comma\n            );\n        }\n    \n        background: {\n            image: $imagesArr;\n            size: $sizeArr;\n            position: $positionArr;\n        }\n        background-repeat: no-repeat;\n        overflow: hidden;\n        width: $width;\n        height: $height;\n        &:before {\n            content: \"\";\n            width: $width;\n            height: $height;\n            display: inline-block;\n            position: relative;\n            top: 0;\n            left: -100%;\n            background-image: linear-gradient(\n                100deg,\n                rgba(255, 255, 255, 0),\n                rgba(255, 255, 255, 0.5) 50%,\n                rgba(255, 255, 255, 0) 80%\n            );\n            animation: shine 1s infinite;\n        }\n    \n        @keyframes shine {\n            to {\n                left: 100%;\n            }\n        }\n    }\n    $demo:${code}\n    div{\n        &:empty {\n            @include skeleton-screen-bg-creator(\n                $demo,\n                100%,\n                100vh\n            );\n        }\n    }\n    `;\n  };\n  const formatCodeCSS = function (styles) {\n    return `\n    div:empty{\n        background-image: ${styles.backgroundImage};\n        background-position: ${styles.backgroundPosition};\n        background-size: ${styles.backgroundSize};\n        background-repeat: no-repeat;\n        width:100vw;\n        height:100vh;\n        overflow:hidden;\n        position:relative;\n    }\n    div:before {\n        content: \"\";\n        width: 100vw;\n        height: 100vh;\n        display: inline-block;\n        position: relative;\n        top: 0;\n        left: -100%;\n        background-image: linear-gradient(\n            100deg,\n            rgba(255, 255, 255, 0),\n            rgba(255, 255, 255, 0.5) 50%,\n            rgba(255, 255, 255, 0) 80%\n        );\n        animation: shine 1s infinite;\n    }\n    @keyframes shine {\n        to {\n            left: 100%;\n        }\n    }\n    `;\n  };\n  return (\n    <>\n      <Canvas width={width} height={height}>\n        <div className=\"result-render\" style={styles}></div>\n      </Canvas>\n      <div>\n        <label htmlFor=\"sass\">Sass:</label>\n        <textarea\n          name=\"sass\"\n          value={formatCode(code)}\n          rows={10}\n          cols={20}\n          onFocus={_selectText}\n          readOnly\n          style={{ width: \"100%\" }}\n        ></textarea>\n      </div>\n      <div>\n        <label htmlFor=\"css\">CSS:</label>\n        <textarea\n          name=\"sass\"\n          value={formatCodeCSS(styles)}\n          rows={10}\n          cols={20}\n          onFocus={_selectText}\n          readOnly\n          style={{ width: \"100%\" }}\n        ></textarea>\n      </div>\n    </>\n  );\n};\n\nexport { parseCodeToStyle };\n\nexport default RenderResult;\n","import { blockGroupBoundaryMin, calculateBlockGroupHeight } from \"../utils\";\nimport { parseCodeToStyle } from \"./RenderResult\";\n\nconst ButtonGroup = function ({\n  onCanvasChange = function () {},\n  onBlockChange = function () {},\n  setBlocks = function () {},\n  blocks = {},\n  canvasAttr = {},\n}) {\n  return (\n    <div className=\"button-group\">\n      <button\n        onClick={() => {\n          onCanvasChange({\n            ...canvasAttr,\n            height: window.innerHeight / 2,\n          });\n          setBlocks([]);\n        }}\n      >\n        清空画板\n      </button>\n      <button onClick={() => onBlockChange(blocks)}>渲染</button>\n\n      <button\n        onClick={() => {\n          let code = window.prompt(\"请填入样式代码 (ps:有格式限制)\") || \"\";\n          code = code.replace(/\\r|\\n|\\s{2}/g, \"\");\n          if (code) {\n            let codeBlocks = setBlocks(code);\n            let blockIds = [];\n            codeBlocks.forEach((block) => {\n              blockIds.push(block.id);\n            });\n            setBlocks([...codeBlocks], blockIds);\n          }\n        }}\n      >\n        导入样式代码\n      </button>\n      <button\n        onClick={() => {\n          let code = window.prompt(\"请填入样式代码 (ps:有格式限制)\") || \"\";\n          code = code.replace(/\\r|\\n|\\s{2}/g, \"\");\n          if (code) {\n            let codeBlocks = parseCodeToStyle(code);\n            let blockIds = [];\n            codeBlocks.forEach((block) => {\n              blockIds.push(block.id);\n            });\n            const extraHeight = calculateBlockGroupHeight(blocks, 15);\n            const min = blockGroupBoundaryMin(codeBlocks, \"top\", true)[1];\n            codeBlocks = codeBlocks.map((block) => {\n              block.style.top += extraHeight - min;\n              return block;\n            });\n            onCanvasChange({\n              ...canvasAttr,\n              height: calculateBlockGroupHeight([...blocks, ...codeBlocks], 15),\n            });\n            setBlocks([...blocks, ...codeBlocks], blockIds);\n          }\n        }}\n      >\n        添加样式块\n      </button>\n    </div>\n  );\n};\n\nexport default ButtonGroup;\n","const Note = function () {\n  return (\n    <div style={{ maxHeight: 250, overflow: \"scroll\", display: \"flex\" }}>\n      <ul>\n        <h3>快捷键:</h3>\n        <li>Delete: 删除</li>\n        <li>Command+V: 复制选中的块</li>\n        <li>ArrowUp|ArrowDown|ArrowLeft|ArrowRight:上下左右移动</li>\n        <li>Command+左击: 多项选择|多项取消选择</li>\n      </ul>\n      <ul>\n        <h3>说明</h3>\n        <li>\n          生成的样式仅对于SCSS有效 且SCSS中已经定义是函数\n          <pre>\n            <code>\n              {`\n                    @mixin skeleton-screen-bg-creator($images, $width, $height) {\n                        $imagesArr: ();\n                        $sizeArr: ();\n                        $positionArr: ();\n                    \n                        @for $i from 1 through length($images) {\n                            $imagesArr: append(\n                                $imagesArr,\n                                nth(nth($images, $i), 1),\n                                $separator: comma\n                            );\n                            $sizeArr: append($sizeArr, nth(nth($images, $i), 2), $separator: comma);\n                            $positionArr: append(\n                                $positionArr,\n                                nth(nth($images, $i), 3),\n                                $separator: comma\n                            );\n                        }\n                    \n                        background: {\n                            image: $imagesArr;\n                            size: $sizeArr;\n                            position: $positionArr;\n                        }\n                        background-repeat: no-repeat;\n                        overflow: hidden;\n                        width: $width;\n                        height: $height;\n                        &:before {\n                            content: \"\";\n                            width: $width;\n                            height: $height;\n                            display: inline-block;\n                            position: relative;\n                            top: -20px;\n                            left: -100%;\n                            background-image: linear-gradient(\n                                100deg,\n                                rgba(255, 255, 255, 0),\n                                rgba(255, 255, 255, 0.5) 50%,\n                                rgba(255, 255, 255, 0) 80%\n                            );\n                            animation: shine 1s infinite;\n                        }\n                    \n                        @keyframes shine {\n                            to {\n                                left: 100%;\n                            }\n                        }\n                    }\n                    `}\n            </code>\n          </pre>\n        </li>\n\n        <li>\n          导入及添加的样式块的格式基于\n          <pre>\n            <code>{`\n            $arr: (\n                (linear-gradient(lightgray 25px, transparent 0), 100px 25px, 15px 15px),\n                (linear-gradient(white 100%, transparent 0), 25px 25px, 120px 15px)\n            );\n            `}</code>\n          </pre>\n          是以[image,size,position]为子元素的数组\n        </li>\n        <li>\n          使用:\n          <pre>\n            <code>\n              {`\n                    $arr: (\n                        (linear-gradient(#ff0000 25px, transparent 0), 100px 25px, 15px 15px),\n                        (linear-gradient(white 100%, transparent 0), 25px 25px, 120px 15px)\n                    );\n                    \n                    .my-skeleton-screen {\n                        @include skeleton-screen-bg-creator($arr,$backgroundWidth,$backgroundHeight);\n                    }\n                    `}\n            </code>\n          </pre>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Note;\n","function Form({\n  children,\n  onSubmit = function (e) {},\n  onReset = function (e) {},\n}) {\n  const _handleSubmit = (e) => {\n    e.preventDefault();\n    const formdata = new FormData(e.target);\n    const data = Object.fromEntries(formdata.entries());\n    const checkboxs = e.target.querySelectorAll('[type=\"checkbox\"]');\n    const checkboxSet = new Set();\n    Array.prototype.forEach.call(checkboxs, (checkbox) => {\n      checkboxSet.add(checkbox.name);\n    });\n    checkboxSet.forEach((checkbox) => {\n      data[checkbox] = formdata.getAll(checkbox);\n    });\n    e.data = data;\n    onSubmit(e);\n  };\n  return (\n    <form onSubmit={_handleSubmit} onReset={onReset}>\n      {children}\n    </form>\n  );\n}\n\nexport default Form;\n","import { blockCreator, blockGroup } from \"../utils\";\nimport Form from \"./Form\";\n\nconst RenderInput = function ({ type = \"square\" }) {\n  const typeInputMap = new Map([\n    [\n      \"square\",\n      ({ height = 100, width = 100 }) => (\n        <>\n          <div>\n            <label htmlFor=\"height\">高度:</label>\n            <input\n              id=\"height\"\n              type=\"number\"\n              name=\"height\"\n              defaultValue={parseInt(height)}\n              placeholder=\"请输入高度\"\n            />\n          </div>\n          <div>\n            <label htmlFor=\"\">宽度:</label>\n            <input\n              type=\"number\"\n              id=\"width\"\n              name=\"width\"\n              defaultValue={parseInt(width)}\n              placeholder=\"请输入宽度\"\n            />\n          </div>\n        </>\n      ),\n    ],\n    [\n      \"circle\",\n      ({ radius = 50 }) => (\n        <div>\n          <label htmlFor=\"radius\">半径:</label>\n          <input\n            type=\"number\"\n            id=\"radius\"\n            name=\"radius\"\n            defaultValue={parseInt(radius)}\n          />\n        </div>\n      ),\n    ],\n  ]);\n  const Inputs = typeInputMap.get(type);\n  const block = arguments[0] || {};\n  return <Inputs {...block.size} />;\n};\n\nconst SetCanvasAccordingToWidthHeight = function ({\n  height = 350,\n  width = 450,\n  style = {},\n  onUpdateCanvas = function () {},\n}) {\n  const _readImage = function (file, imageWidth) {\n    return new Promise((resolve, reject) => {\n      if (!file.name) {\n        return reject();\n      }\n      const reader = new FileReader();\n      reader.onload = function () {\n        const image = new Image();\n        image.onload = function () {\n          const originalWidth = image.width;\n          image.width = imageWidth;\n          image.height = (imageWidth * image.height) / originalWidth;\n          resolve(image);\n        };\n        image.src = this.result;\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n  const _handleSubmit = async function (event) {\n    try {\n      const image = await _readImage(\n        event.data.file,\n        parseInt(event.data.imageWidth)\n      );\n      onUpdateCanvas({ ...event.data, image });\n    } catch (e) {\n      onUpdateCanvas({ ...event.data, file: null });\n    }\n  };\n  return (\n    <Form onSubmit={_handleSubmit} style={style}>\n      <h3>设置画布属性:</h3>\n      <div>\n        <label htmlFor=\"\">画布宽度:</label>\n        <input\n          type=\"number\"\n          id=\"width\"\n          name=\"width\"\n          defaultValue={parseInt(width)}\n          placeholder=\"请输入画布宽度\"\n        />\n      </div>\n      <div>\n        <label htmlFor=\"\">画布高度:</label>\n        <input\n          type=\"number\"\n          id=\"height\"\n          name=\"height\"\n          defaultValue={parseInt(height)}\n          placeholder=\"请输入画布高度\"\n        />\n      </div>\n\n      <div>\n        <label htmlFor=\"image\">上传图片:</label>\n        <input type=\"file\" accept=\"image/*\" name=\"file\" />\n      </div>\n      <div>\n        <label htmlFor=\"imageWidth\">底图宽度:</label>\n        <input\n          type=\"number\"\n          name=\"imageWidth\"\n          id=\"imageWidth\"\n          defaultValue={parseInt(width)}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">提交</button>\n        <button type=\"reset\">重置</button>\n      </div>\n    </Form>\n  );\n};\n\nconst Settings = function ({\n  blocks = [],\n  canvasAttr = {},\n  onUpdateBlock = function () {},\n  onUpdateCanvas = function () {},\n}) {\n  const [activeGroup] = blockGroup(blocks, true);\n  let currentBlock = {};\n  if (!activeGroup.length) {\n    return (\n      <SetCanvasAccordingToWidthHeight\n        {...canvasAttr}\n        onUpdateCanvas={onUpdateCanvas}\n      />\n    );\n  } else if (activeGroup.length === 1) {\n    currentBlock = activeGroup[0];\n  } else {\n    return \"\";\n  }\n\n  const _handleSubmit = function (event) {\n    let {\n      color = \"\",\n      width = 0,\n      height = 0,\n      left = 0,\n      top = 0,\n      radius = 0,\n      type = \"\",\n    } = event.data;\n    if (type === \"circle\") {\n      radius =\n        radius ||\n        Math.min(currentBlock.size.width, currentBlock.size.height) / 2;\n      width = radius * 2;\n      height = radius * 2;\n    } else if (type === \"square\") {\n      width = width || radius * 2;\n      height = height || radius * 2;\n      radius = 0;\n    }\n    const [newBlock] = blockCreator(\n      {\n        type,\n        color,\n        width: parseInt(width),\n        height: parseInt(height),\n        radius: parseInt(radius),\n        left: parseInt(left),\n        top: parseInt(top),\n        id: currentBlock.id,\n      },\n      { canvas: canvasAttr }\n    );\n    onUpdateBlock(currentBlock.id, newBlock);\n  };\n\n  return (\n    <Form onSubmit={_handleSubmit}>\n      <h3>设置块属性:</h3>\n      <RenderInput {...currentBlock} />\n      <div>\n        <label htmlFor=\"type\">类型:</label>\n        <select\n          name=\"type\"\n          id=\"type\"\n          key={currentBlock.type}\n          defaultValue={currentBlock.type}\n        >\n          <option value=\"circle\">circle</option>\n          <option value=\"square\">square</option>\n        </select>\n      </div>\n      <div>\n        <label htmlFor=\"color\">颜色:</label>\n        <input\n          key={currentBlock.size.color}\n          type=\"color\"\n          defaultValue={currentBlock.size.color}\n          name=\"color\"\n          id=\"color\"\n        />\n      </div>\n      <p>---微调---</p>\n      <div>\n        <label htmlFor=\"left\">X:</label>\n        <input\n          key={currentBlock.style.left}\n          type=\"number\"\n          defaultValue={parseInt(currentBlock.style.left)}\n          name=\"left\"\n          id=\"left\"\n        />\n      </div>\n      <div>\n        <label htmlFor=\"top\">Y:</label>\n        <input\n          key={currentBlock.style.top}\n          type=\"number\"\n          defaultValue={parseInt(currentBlock.style.top)}\n          name=\"top\"\n          id=\"top\"\n        />\n      </div>\n      <div>\n        <button type=\"submit\">提交</button>\n        <button type=\"reset\">重置</button>\n      </div>\n    </Form>\n  );\n};\n\nexport default Settings;\n","import { useCallback, useState } from \"react\";\nimport { blockCreator, throttle } from \"../utils\";\nimport BlockLists, { getBlockByType, presets } from \"./Block\";\nimport { RenderBlocks } from \"./BlockWrapper\";\nimport ButtonGroup from \"./ButtonGroup\";\nimport Canvas from \"./Canvas\";\nimport Note from \"./Note\";\nimport \"./Playground.scss\";\nimport Settings from \"./Settings\";\n\nconst _blockChangeThrottle = throttle();\n\nconst Playground = function ({\n  liveRender = false,\n  canvasAttr = {},\n  onBlockChange = function () {},\n  onCanvasChange = function () {},\n}) {\n  const [blocks, setBlocks] = useState([]);\n\n  const _setBlocksAndListen = function (blocks = [], activeIds = []) {\n    blocks = blocks.map((block) => {\n      block.isActive = activeIds.indexOf(block.id) >= 0;\n      return block;\n    });\n    setBlocks(blocks);\n    liveRender &&\n      _blockChangeThrottle(function (data) {\n        onBlockChange(data);\n      }, blocks);\n  };\n\n  const _handleUpdateBlockById = function (id, newBlock = {}) {\n    _setBlocksAndListen(\n      blocks.map((block) => {\n        if (block.id === id) {\n          return { ...block, ...newBlock };\n        }\n        return block;\n      }),\n      [id]\n    );\n  };\n  const _handleDrop = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const { X, Y, type } = JSON.parse(event.dataTransfer.getData(\"block\"));\n\n    const canvasRect = event.target.getBoundingClientRect();\n\n    const { size, items = [] } = getBlockByType(type)[1];\n\n    if (items.length > 0) {\n      let blockItems = [];\n      let blockItemIds = [];\n      items.forEach((item) => {\n        console.log(item.size);\n        const [block] = blockCreator(\n          {\n            type: item.type,\n            isActive: true,\n            left:\n              parseInt(event.clientX - X - canvasRect.x) +\n              (item?.style?.left || 0),\n            top:\n              parseInt(event.clientY - Y - canvasRect.y) +\n              (item?.style?.top || 0),\n            ...item.size,\n          },\n          { canvas: event.target }\n        );\n        blockItems.push(block);\n        blockItemIds.push(block.id);\n      });\n      _setBlocksAndListen([...blocks, ...blockItems], [...blockItemIds]);\n    } else {\n      const [block] = blockCreator(\n        {\n          type,\n          isActive: true,\n          left: parseInt(event.clientX - X - canvasRect.x),\n          top: parseInt(event.clientY - Y - canvasRect.y),\n          ...size,\n        },\n        { canvas: event.target }\n      );\n      _setBlocksAndListen([...blocks, block], [block.id]);\n    }\n  };\n\n  const _handleDragOver = function (event) {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = \"copy\";\n  };\n\n  const _calculateBoundary = function ({\n    x = 0,\n    y = 0,\n    blockRect,\n    canvasRect,\n  }) {\n    return (\n      x < 0 ||\n      y < 0 ||\n      x + blockRect.width > canvasRect.width ||\n      y + blockRect.height > canvasRect.height\n    );\n  };\n\n  const _handleMouseDown = function (event, canvasRef) {\n    event.stopPropagation();\n    event.preventDefault();\n    const currentBlock = _getCurrentBlock(blocks, event.target.id);\n    if (\n      !currentBlock.id ||\n      (currentBlock.id && event.target.id !== String(currentBlock.id))\n    ) {\n      return;\n    }\n\n    const blockRect = event.target.getBoundingClientRect();\n    const canvasRect = canvasRef.current.getBoundingClientRect();\n\n    const minusX = Math.abs(event.clientX - blockRect.x);\n    const minusY = Math.abs(event.clientY - blockRect.y);\n\n    const _move = (e) => {\n      //todo 支持block group 移动；\n      let x = e.clientX - minusX - canvasRect.x;\n      let y = e.clientY - minusY - canvasRect.y;\n\n      if (_calculateBoundary({ x, y, blockRect, canvasRect })) {\n        return;\n      }\n      _handleUpdateBlockById(currentBlock.id, {\n        style: {\n          left: x,\n          top: y,\n        },\n      });\n    };\n    const _up = (e) => {\n      document.removeEventListener(\"mousemove\", _move);\n      document.removeEventListener(\"mouseup\", _up);\n    };\n    document.addEventListener(\"mousemove\", _move);\n    document.addEventListener(\"mouseup\", _up);\n  };\n\n  const _getCurrentBlock = function (blocks = [], id = \"\") {\n    return blocks.find((block) => block.id === Number(id)) || {};\n  };\n\n  //   console.log(\"blocks:\", blocks, JSON.stringify(blocks));\n\n  return (\n    <>\n      <div style={{ border: \"1px solid lightgray\" }}>\n        <h2>可拖拽预设:</h2>\n        <div\n          style={{ padding: 15, backgroundColor: \"green\" }}\n          className=\"presets-box\"\n        >\n          <BlockLists blocks={presets} draggable={true} />\n        </div>\n      </div>\n      <Canvas\n        onDrop={_handleDrop}\n        onDragOver={_handleDragOver}\n        onMouseDown={_handleMouseDown}\n        blocks={blocks}\n        onUpdateBlock={_setBlocksAndListen}\n        {...canvasAttr}\n      >\n        <RenderBlocks onUpdateBlock={_setBlocksAndListen} />\n      </Canvas>\n      <div style={{ display: \"flex\", minHeight: 250 }}>\n        <ButtonGroup\n          onCanvasChange={onCanvasChange}\n          onBlockChange={onBlockChange}\n          setBlocks={_setBlocksAndListen}\n          blocks={blocks}\n          canvasAttr={canvasAttr}\n        />\n        <Settings\n          blocks={blocks}\n          canvasAttr={canvasAttr}\n          onUpdateBlock={_handleUpdateBlockById}\n          onUpdateCanvas={useCallback(\n            (attrs) => {\n              onCanvasChange(attrs);\n            },\n            [onCanvasChange]\n          )}\n        />\n        <Note />\n      </div>\n    </>\n  );\n};\n\nexport default Playground;\n","import { useCallback, useState } from \"react\";\nimport \"./App.scss\";\nimport Playground from \"./components/Playground\";\nimport RenderResult from \"./components/RenderResult\";\n\nfunction App() {\n  const [blocks, setBlocks] = useState([]);\n  const [canvasAttr, setCanvasAttr] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight / 2,\n  });\n  console.log(\"-----\", blocks, canvasAttr);\n  return (\n    <>\n      <Playground\n        liveRender={true}\n        canvasAttr={canvasAttr}\n        onBlockChange={useCallback((block) => setBlocks(block), [])}\n        onCanvasChange={useCallback((attrs) => setCanvasAttr(attrs), [])}\n      ></Playground>\n\n      <hr />\n      <h1>Output:</h1>\n      <RenderResult blocks={blocks} {...canvasAttr} />\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.scss\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}